---
title: shell-part1-shell输入和输出
tags: Shell
date: 2018-02-01 09:58:30
---
在shell脚本中，可以用几种不同的方式读入数据：可以使用标准输入—缺省为键盘，或者指定一个文件作为输入。对于输出也是一样：如果不指定某个文件作为输出，标准输出总是和终端屏幕相关联。如果所使用命令出现了什么错误，它也会缺省输出到屏幕上，如果不想把这些信息输出到屏幕上，也可以把这些信息指定到一个文件中。
- ### echo

---
echo命令可以显示文本行或变量，或者把字符串输入到文件。
~~~
$echo string 
#命令参数
    \c  不换行
    \f  进纸
    \t  跳格
    \n  换行
    -e  使转义字符有效
~~~
- ### read

---
可以使用read语句从键盘或文件的某一行文本中读入信息，并将其赋给一个变量。如果只指定了一个变量，那么read将会把所有的输入赋给该变量，直至遇到第一个文件结束符或回车。
~~~
read varible1 varible2 ...
~~~
- ### cat

---
cat是一个简单而通用的命令，可以用它来显示文件内容，创建文件，还可以用它来显示控制字符。在使用cat命令时要注意，它不会在文件分页符处停下来；它会一下显示完整个文件。如果希望每次显示一页，可以使用more命令或把cat命令的输出通过管道传递到另外一个具有分页功能的命令中
~~~
$cat [options] filename1 ... filename2 ...
~~~
- ### 管道

---
可以通过管道把一个命令的输出传递给另一个命令作为输入。管道用竖杠|表示。
~~~
命令     |  命令２
df -k    | awk '{print $1}' | grep -v "Filesystem"
~~~
- ### tee

---
tee命令作用可以用字母t来形象地表示。它把输出的一个副本输送到标准输出，另一个副本拷贝到相应的文件中。如果希望在看到输出的同时，也将其存入一个文件，那么这个命令再合适不过了。
~~~
tee -a files
~~~
- ### 标准输入/输出和错误

---
当我们在shell中执行命令的时候，每个进程都和三个打开的文件相联系，并使用文件描述符来引用这些文件。由于文件描述符不容易记忆，shell同时也给出了相应的文件名。
~~~
    输入文件—标准输入           0
    输出文件—标准输出           1
    错误输出文件—标准错误       2
~~~
- ### 文件重定向

---
在执行命令时，可以指定命令的标准输入、输出和错误，要实现这一点就需要使用文件重定向。
~~~
command > filename``        把标准输出重定向到一个新文件中
command >> filename         把标准输出重定向到一个文件中(追加)
command 1> fielname         把标准输出重定向到一个文件中
command >filename 2>&1      把标准输出和标准错误一起重定向到一个文件中
command 2> filename         把标准错误重定向到一个文件中
command 2>> filename        把标准输出重定向到一个文件中(追加)
command > filename 2>&1     把把标准输出和标准错误一起重定向到一个文件中(追加)
command <filename >filename2    把command命令以filename文件作为标准输入，以filename2文件作为标准输出
command <filename           把command命令以filename文件作为标准输入
command << delimiter        把从标准输入中读入，直至遇到delimiter分界符
command <&m                 把文件描述符m作为标准输入
command >&m                 把标准输出重定向到文件描述符m中
command <&-                 把关闭标准输入
~~~
- ### 结合使用标准输入和标准错误　

---
一个快速发现错误的方法就是，先将输出重定向到一个文件中，然后再把标准错误重定向到另外一个文件中。
~~~

~~~
- ### 合并标准和标准输出和标准错误

---
在合并标准输出和标准错误的时候，切记shell是从左至右分析相应的命令的。
~~~

~~~
- ### exec

---
exec命令可以用来替代当前shell；换句话说，并没有启动子shell。使用这一命令时任何现有环境都将会被清除，并重新启动一个shell。
~~~
exec command 
~~~
- ### 使用文件描述符

---
可以使用exec命令通过文件描述符打开和关闭文件。
~~~
exec 4<&0 0<$1
read line1
read line2
exec 0<&4
echo $line1
echo $line2
~~~
