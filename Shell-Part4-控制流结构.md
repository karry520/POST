---
title: Shell-Part4-控制流结构 
tags: Shell
date: 2018-02-01 10:01:07
---

所有功能脚本必须有能力进行判断，也必须有能力基于一定条件处理相关命令。本章讲述这方面的功能，在脚本中创建和应用控制结构。
- ### 退出状态

---
任何命令进行时都将返回一个退出状态。如果要观察其退出状态，使用最后状态命令：
~~~
$echo $?
~~~
退出当前进程，shell提供命令exit，一般格式为：
~~~
exit n
~~~
- ### 控制结构

---
- #### 流控制
if、then、else语句提供条件测试。测试可以基于各种条件。例如文件的权限、长度、数值或字符串的比较。这些测试返回值或者为真（0），或者为假（1）。基于此结果，可以进行相关操作。在讲到条件测试时已经涉及了一些测试语法。case语句允许匹配模式、单词或值。一旦模式或值匹配，就可以基于这个匹配条件作其他声明。
- #### 循环
循环或跳转是一系列命令的重复执行过程，本书提到了3种循环语句：
~~~
    For    循环每次处理依次列表内信息，直至循环耗尽。
    Until  循环此循环语句不常使用，until循环直至条件为真。条件部分在循环末尾部分。
    While  循环while循环当条件为真时，循环执行，条件部分在循环头。流控制语句的任何循环均可嵌套使用，例如可以在一个for循环中嵌入另一个for循环。
~~~
- ### if then else语句

---
if语句测试条件，测试条件返回真（0）或假（1）后，可相应执行一系列语句。if语句结构对错误检查非常有用。
~~~
If       条件1                      如果条件1为真
    then         那么命令1          执行命令1
elif    条件2                      如果条件1不成立
    then         那么命令2          执行命令2
else                                如果条件1，2均不成立命令3       
                 那么执行命令3
fi               完成
~~~
- ### case语句　

---
case语句为多选择语句。可以用case语句匹配一个值与一个模式，如果匹配成功，执行相匹配的命令。case语句格式如下：
~~~
case 值 in
模式1)
    命令1...; ;
模式2）
    命令2...；；
esac
~~~
- ### for循环

---
for循环一般格式为：
~~~
for 变量名in列表
do
    命令1命令2⋯
done
~~~
- ### until循环

---
until循环执行一系列命令直至条件为真时停止。until循环与while循环在处理方式上刚好相反。一般while循环优于until循环，但在某些时候—也只是极少数情况下，until循环更加有用。until循环格式为：
~~~
until  条件
    命令1...
done
~~~
- ### while循环

---
while循环用于不断执行一系列命令，也用于从输入文件中读取数据，其格式为：
~~~
while    命令
do       命令1
         命令2
          ...
         命令2 
done
~~~
~~~
while read LINE
do 
    echo $LINE
done < names.txt
~~~
- ### 使用break和continue控制循环

---
有时需要基于某些准则退出循环或跳过循环步。shell提供两个命令实现此功能。
~~~
• break
• continue
~~~

